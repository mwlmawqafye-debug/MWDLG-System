{% extends "base.html" %}

{% block title %}
    {% if form_data.id %}
        تعديل {{ entity.name_singular_acc }}
    {% else %}
        إضافة {{ entity.name_singular_acc }} جديد
    {% endif %}
{% endblock %}

{% block content %}
<div class="mb-8">
    <h1 class="text-4xl text-gray-800">
        {% if form_data.id %}
            تعديل {{ entity.name_singular_acc }}: <span class="font-bold text-primary-600">#{{ form_data.id }}</span>
        {% else %}
            إضافة {{ entity.name_singular_acc }} جديد
        {% endif %}
    </h1>
    <p class="text-gray-500 mt-1">
        {% if form_data.id %}
            قم بتحديث الحقول أدناه ثم اضغط على "حفظ التعديلات".
        {% else %}
            املأ الحقول التالية لإضافة سجل جديد إلى "{{ entity.name_plural }}".
        {% endif %}
    </p>
</div>

<div class="card">
    <form method="POST" action="">
        <div class="space-y-6">
            {% for field_name, field_props in entity.fields.items() %}
                <div>
                    <label for="{{ field_name }}" class="block text-sm font-medium text-gray-700 mb-1">{{ field_props.label }}</label>
                    
                    {% if field_props.type == 'textarea' %}
                        <textarea id="{{ field_name }}" name="{{ field_name }}" rows="4" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500">{{ form_data.get(field_name, '') }}</textarea>
                    {% elif field_props.type == 'date' %}
                        <input type="date" id="{{ field_name }}" name="{{ field_name }}" value="{{ form_data.get(field_name, '') }}" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500">
                    {% else %}
                        <input type="text" id="{{ field_name }}" name="{{ field_name }}" value="{{ form_data.get(field_name, '') }}" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500">
                    {% endif %}

                    {% if field_props.help_text %}
                        <p class="mt-1 text-xs text-gray-500">{{ field_props.help_text }}</p>
                    {% endif %}
                </div>
            {% endfor %}
        </div>

        <div class="mt-8 pt-6 border-t border-gray-200 flex justify-end gap-4">
            <a href="{{ url_for('manage_entity', entity_slug=entity.slug) }}" class="btn bg-white border border-gray-300 text-gray-700">إلغاء</a>
            <button type="submit" class="btn btn-primary">
                {% if form_data.id %}
                    حفظ التعديلات
                {% else %}
                    حفظ {{ entity.name_singular_acc }}
                {% endif %}
            </button>
        </div>
    </form>
</div>
{% endblock %}
